import{_ as g,H as P,S as y}from"./index.2e5d4484.js";import{h as C,w as R,r as p,o as i,a as f,b as t,c as n,F as k,f as b,t as m,d as c}from"./vendor.e9c094e2.js";const S={data(){return{RapoarteStaff:[],PaginateRange:7,CurrentPage:1,Pages:[],IsUserAdmin:0,adminId:0}},components:{"staffraport-Header":P,"staffraport-Sidebar":y},methods:{async GetStaffActivity(){const e=(await this.$axios.get("https://fairplay-rp.ro/api/staff")).data,r=[];e.forEach(s=>{s.adminLvl>=1&&(s.userRaport?r.push({id:s.id,name:s.username,adminLvl:s.adminLvl,tickete:s.userRaport.tickets}):r.push({id:s.id,name:s.username,adminLvl:s.adminLvl,tickete:0}))}),this.RapoarteStaff=r.sort((s,l)=>s.adminLvl-l.adminLvl),this.setPages(this.RapoarteStaff)},GetDate(a){var e=new Date(a*1e3),r=e.getFullYear(),s=e.getMonth(),l=e.getDate(),d=e.getHours(),h=e.getMinutes(),d=e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours(),h=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),_=l+"/"+s+"/"+r+" "+d+":"+h;return _},async ResetRapoarte(){Swal.fire({title:"Vrei sa resetezi Rapoartele?",text:"Tot progresul membrilor staff va fi resetat!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Reseteaza Rapoartele!"}).then(a=>{if(a.isConfirmed){let e="resetrapoarte";this.$axios.post("https://fairplay-rp.ro/api/rcon",{command:e},{withCredentials:!0}),setTimeout(()=>{window.location.reload()},1e3),Swal.fire("Rapoarte Resetate","Rapoartele au fost resetate!.","success")}})},async hasUserAdmin(){this.$axios.get("https://fairplay-rp.ro/api/admin",{withCredentials:!0}).then(a=>{a.data.isAdmin?(this.IsUserAdmin=a.data.adminLvl,this.adminId=a.data.adminId):this.IsUserAdmin=0})},GoToProfile(a){this.$router.push("/profile/"+a)},PagePlus(){this.CurrentPage<this.Pages.length&&this.CurrentPage++},PageMinus(){this.CurrentPage!=1&&this.CurrentPage--},setPages(a){let e=Math.ceil(a.length/this.PaginateRange);for(let r=1;r<=e;r++)this.Pages.push(r)},paginate(a){let e=this.CurrentPage,r=this.PaginateRange,s=e*r-r,l=e*r;return a.slice(s,l)},async FormatHours(a){return await a.toFixed()}},computed:{StaffRaportTable(){return this.paginate(this.RapoarteStaff)}},async created(){let a=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!1,backgroundColor:"#00000090",transition:"fade",enforceFocus:!0,opacity:.9,loader:"dots",color:"#0098ff"});setTimeout(()=>{a.hide()},2e3),this.GetStaffActivity(),this.hasUserAdmin()}},L={class:"staffraport-content"},x={key:0,class:"staffraport-members"},w={class:"staffraport-members-header"},H={class:"staffraport-header-data"},A={class:"icon"},M=t("div",{class:"header-texts"},[t("h1",null,"Rapoarte staffraport"),t("p",null,"Vezi rapoartele membrilor staff")],-1),T={class:"reset"},B=t("div",{class:"staffraport-hr"},null,-1),D={class:"staffraport-members-data"},F={class:"styled-table"},I=t("thead",null,[t("tr",null,[t("th",null,"Nume Admin"),t("th",null,"Grad"),t("th",null,"Tickete"),t("th",null,"Mute"),t("th",null,"Ban"),t("th",null,"Admin Jail")])],-1),$=["onClick"],G={class:"icon"},U={class:"staffraport-member-texts"},V={key:0,class:"staffraport-icon"},N={key:1,class:"staffraport-icon"},z={key:2,class:"staffraport-icon"},E={key:3,class:"staffraport-icon"},J={key:4,class:"staffraport-icon"},O={key:5,class:"staffraport-icon"},Y={key:6,class:"staffraport-icon"},j=t("td",null,"0",-1),q=t("td",null,"0",-1),K=t("td",null,"0",-1),Q={class:"pagination"},W={class:"icon"},X={class:"page-selected"},Z={class:"icon"};function tt(a,e,r,s,l,d){const h=p("staffraport-Sidebar"),_=p("staffraport-Header"),u=p("fa"),v=p("raportstaff-page");return i(),C(v,null,{default:R(()=>[f(h,{page:"3"}),t("div",L,[f(_,{page:"Rapoarte Staff"}),l.IsUserAdmin>=4?(i(),n("div",x,[t("div",w,[t("div",H,[t("div",A,[f(u,{icon:"fa-solid fa-users"})]),M]),t("div",{class:"reset-rapoarte-data",onClick:e[0]||(e[0]=o=>d.ResetRapoarte())},[t("div",T,[f(u,{icon:"fa-solid fa-repeat"})])])]),B,t("div",D,[t("table",F,[I,t("tbody",null,[(i(!0),n(k,null,b(d.StaffRaportTable,(o,et)=>(i(),n("tr",null,[t("td",null,[t("div",{class:"staffraport-member",onClick:at=>d.GoToProfile(o.id)},[t("div",G,[f(u,{icon:"fa-solid fa-user"})]),t("div",U,[t("h1",null,m(o.name),1),t("p",null,"ID: "+m(o.id),1)])],8,$)]),t("td",null,[o.adminLvl==1?(i(),n("div",V," Helper in Teste ")):c("",!0),o.adminLvl==2?(i(),n("div",N," Helper ")):c("",!0),o.adminLvl==3?(i(),n("div",z," Moderator ")):c("",!0),o.adminLvl==4?(i(),n("div",E," Administrator ")):c("",!0),o.adminLvl==5?(i(),n("div",J," Developer ")):c("",!0),o.adminLvl==6?(i(),n("div",O," Co-Fondator ")):c("",!0),o.adminLvl>=7?(i(),n("div",Y," Fondator ")):c("",!0)]),t("td",null,m(o.tickete),1),j,q,K]))),256))])])]),t("div",Q,[t("div",{class:"page-button",onClick:e[1]||(e[1]=o=>d.PageMinus())},[t("div",W,[f(u,{icon:"fa-solid fa-angle-left"})])]),t("div",X,m(l.CurrentPage),1),t("div",{class:"page-button",onClick:e[2]||(e[2]=o=>d.PagePlus())},[t("div",Z,[f(u,{icon:"fa-solid fa-chevron-right"})])])])])):c("",!0)])]),_:1})}var ot=g(S,[["render",tt]]);export{ot as default};
