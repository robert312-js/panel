import{H as v,S as g}from"./Sidebar.d7e6fd94.js";import{_ as P}from"./index.25321405.js";import{c as r,a as l,i as t,j as R,k as y,t as h,r as _,o as n,m as d}from"./vendor.9dd6c1d0.js";var C={data(){return{RapoarteStaff:[],PaginateRange:7,CurrentPage:1,Pages:[],IsUserAdmin:0}},components:{"staffraport-Header":v,"staffraport-Sidebar":g},methods:{async GetStaffActivity(){const e=(await this.$axios.get("http://localhost:5000/api/staff")).data,o=[];e.forEach(s=>{s.adminLvl>=1&&(s.userRaport?o.push({id:s.id,name:s.username,adminLvl:s.adminLvl,tickete:s.userRaport.tickets}):o.push({id:s.id,name:s.username,adminLvl:s.adminLvl,tickete:0}))}),this.RapoarteStaff=o.sort((s,c)=>s.adminLvl-c.adminLvl),this.setPages(this.RapoarteStaff)},GetDate(a){var e=new Date(a*1e3),o=e.getFullYear(),s=e.getMonth(),c=e.getDate(),p=e.getHours(),u=e.getMinutes(),p=e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours(),u=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),m=c+"/"+s+"/"+o+" "+p+":"+u;return m},async ResetRapoarte(){Swal.fire({title:"Vrei sa resetezi Rapoartele?",text:"Tot progresul membrilor staff va fi resetat!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Reseteaza Rapoartele!"}).then(a=>{if(a.isConfirmed){let e="resetrapoarte";this.$axios.post("http://localhost:5000/api/rcon",{command:e},{withCredentials:!0}),setTimeout(()=>{window.location.reload()},1e3),Swal.fire("Rapoarte Resetate","Rapoartele au fost resetate!.","success")}})},async hasUserAdmin(){this.$axios.get("http://localhost:5000/api/admin",{withCredentials:!0}).then(a=>{a.data.isAdmin?(this.IsUserAdmin=a.data.adminLvl,this.adminId=a.data.adminId):this.IsUserAdmin=0})},GoToProfile(a){this.$router.push("/profile/"+a)},PagePlus(){this.CurrentPage<this.Pages.length&&this.CurrentPage++},PageMinus(){this.CurrentPage!=1&&this.CurrentPage--},setPages(a){let e=Math.ceil(a.length/this.PaginateRange);for(let o=1;o<=e;o++)this.Pages.push(o)},paginate(a){let e=this.CurrentPage,o=this.PaginateRange,s=e*o-o,c=e*o;return a.slice(s,c)},async FormatHours(a){return await a.toFixed()}},computed:{StaffRaportTable(){return this.paginate(this.RapoarteStaff)}},async created(){let a=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!1,backgroundColor:"#00000090",transition:"fade",enforceFocus:!0,opacity:.9,loader:"dots",color:"#0098ff"});setTimeout(()=>{a.hide()},2e3),this.GetStaffActivity(),this.hasUserAdmin()}};const b={class:"dashboard"},k={class:"staffraport-content"},S={class:"staffraport-members"},L={class:"staffraport-members-header"},H={class:"staffraport-header-data"},$={class:"icon"},w=t("div",{class:"header-texts"},[t("h1",null,"Rapoarte staffraport"),t("p",null,"Vezi rapoartele membrilor staff")],-1),A={class:"reset"},M=t("div",{class:"staffraport-hr"},null,-1),T={class:"staffraport-members-data"},x={class:"styled-table"},B=t("thead",null,[t("tr",null,[t("th",null,"Nume Admin"),t("th",null,"Grad"),t("th",null,"Tickete"),t("th",null,"Mute"),t("th",null,"Ban"),t("th",null,"Admin Jail")])],-1),D=["onClick"],F={class:"icon"},G={class:"staffraport-member-texts"},I={key:0,class:"staffraport-icon"},U={key:1,class:"staffraport-icon"},V={key:2,class:"staffraport-icon"},N={key:3,class:"staffraport-icon"},z={key:4,class:"staffraport-icon"},E={key:5,class:"staffraport-icon"},j={key:6,class:"staffraport-icon"},J=t("td",null,"0",-1),O=t("td",null,"0",-1),Y=t("td",null,"0",-1),q={class:"pagination"},K={class:"icon"},Q={class:"page-selected"},W={class:"icon"};function X(a,e,o,s,c,p){const u=_("staffraport-Sidebar"),m=_("staffraport-Header"),f=_("fa");return n(),r("div",b,[l(u,{page:"3"}),t("div",k,[l(m,{page:"Rapoarte Staff"}),t("div",S,[t("div",L,[t("div",H,[t("div",$,[l(f,{icon:"fa-solid fa-users"})]),w]),t("div",{class:"reset-rapoarte-data",onClick:e[0]||(e[0]=i=>a.ResetRapoarte())},[t("div",A,[l(f,{icon:"fa-solid fa-repeat"})])])]),M,t("div",T,[t("table",x,[B,t("tbody",null,[(n(!0),r(R,null,y(a.StaffRaportTable,(i,Z)=>(n(),r("tr",null,[t("td",null,[t("div",{class:"staffraport-member",onClick:tt=>a.GoToProfile(i.id)},[t("div",F,[l(f,{icon:"fa-solid fa-user"})]),t("div",G,[t("h1",null,h(i.name),1),t("p",null,"ID: "+h(i.id),1)])],8,D)]),t("td",null,[i.adminLvl==1?(n(),r("div",I," Helper in Teste ")):d("",!0),i.adminLvl==2?(n(),r("div",U," Helper ")):d("",!0),i.adminLvl==3?(n(),r("div",V," Moderator ")):d("",!0),i.adminLvl==4?(n(),r("div",N," Administrator ")):d("",!0),i.adminLvl==5?(n(),r("div",z," Developer ")):d("",!0),i.adminLvl==6?(n(),r("div",E," Co-Fondator ")):d("",!0),i.adminLvl>=7?(n(),r("div",j," Fondator ")):d("",!0)]),t("td",null,h(i.tickete),1),J,O,Y]))),256))])])]),t("div",q,[t("div",{class:"page-button",onClick:e[1]||(e[1]=i=>a.PageMinus())},[t("div",K,[l(f,{icon:"fa-solid fa-angle-left"})])]),t("div",Q,h(a.CurrentPage),1),t("div",{class:"page-button",onClick:e[2]||(e[2]=i=>a.PagePlus())},[t("div",W,[l(f,{icon:"fa-solid fa-chevron-right"})])])])])])])}var ot=P(C,[["render",X]]);export{ot as default};
